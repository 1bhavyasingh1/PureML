import{a as p}from"/build/_shared/chunk-HMIFHG5U.js";import{a as J}from"/build/_shared/chunk-FNGYAMLS.js";import{a as E}from"/build/_shared/chunk-66BWBXYA.js";import"/build/_shared/chunk-XZZCBT56.js";import"/build/_shared/chunk-GA5CE6QK.js";import{c as k,d as D}from"/build/_shared/chunk-4MN4GN7E.js";import"/build/_shared/chunk-P6UAVHBL.js";import{j as b,k as w}from"/build/_shared/chunk-6ERGQZP6.js";import"/build/_shared/chunk-WNC7G6UM.js";import"/build/_shared/chunk-LQHMM3AA.js";import{a as V,b as y}from"/build/_shared/chunk-CXVWUV7G.js";import{e as d}from"/build/_shared/chunk-ADMCF34Z.js";var O=d(J());var n=d(V());var e=d(y()),P=()=>({charset:"utf-8",title:"Dataset Versions | PureML",viewport:"width=device-width,initial-scale=1"});function T({tab:F}){let C=w(),M=b()[2].pathname,f=decodeURI(M.slice(1)),j=f.split("/")[1],A=f.split("/")[3],[l,S]=(0,n.useState)(!0),[G,R]=(0,n.useState)(!0),a=C.versions,[r,g]=(0,n.useState)(""),[o,c]=(0,n.useState)(""),[h,x]=(0,n.useState)(null),[I,v]=(0,n.useState)(null),[N,m]=(0,n.useState)(null),[L,u]=(0,n.useState)(null);return(0,n.useEffect)(()=>{!a[0]||!a[0].lineage.lineage||(g(a.at(-1).version),c(""))},[a]),(0,n.useEffect)(()=>{if(!a)return;if(o===""){m(null),u(null);return}let s=JSON.parse(a.at(Number(o.slice(1))-1).lineage.lineage).nodes;s.forEach(t=>{t.data={label:t.text}}),m(null),setTimeout(()=>{m(s)},10);let i=JSON.parse(a.at(Number(o.slice(1))-1).lineage.lineage).edges;i.forEach(t=>{t.source=t.from,t.target=t.to}),u(null),setTimeout(()=>{u(i)},10)},[o,a]),(0,n.useEffect)(()=>{if(!a)return;let s=JSON.parse(a.at(Number(r.slice(1))-1).lineage.lineage).nodes;s.forEach(t=>{t.data={label:t.text}}),x(null),setTimeout(()=>{x(s)},10);let i=JSON.parse(a.at(Number(r.slice(1))-1).lineage.lineage).edges;i.forEach(t=>{t.source=t.from,t.target=t.to}),v(null),setTimeout(()=>{v(i)},10)},[r,a]),(0,e.jsxs)("main",{className:"flex px-2",children:[(0,e.jsxs)("div",{className:"w-full",id:"main",children:[(0,e.jsx)(E,{intent:"datasetTab",tab:"datalineage"}),(0,e.jsx)("div",{className:"px-10 py-8",children:(0,e.jsxs)("section",{className:"w-full",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between w-full border-b-slate-300 border-b",onClick:()=>S(!l),children:[(0,e.jsx)("h1",{className:"text-slate-900 font-medium text-sm rounded-lg",children:"Data Lineage"}),l?(0,e.jsx)(D,{className:"text-slate-400"}):(0,e.jsx)(k,{className:"text-slate-400"})]}),l&&(0,e.jsxs)("div",{className:"flex",children:[(0,e.jsx)("div",{className:"w-full h-screen max-h-[600px]",children:h&&(0,e.jsx)(p,{pnode:h,pedge:I})}),(0,e.jsx)("div",{className:"w-full h-screen max-h-[600px]",children:N&&(0,e.jsx)(p,{pnode:N,pedge:L})})]}),!l&&(0,e.jsx)("div",{children:"Add Data lineage"})]})})]}),(0,e.jsxs)("aside",{className:"sticky top-40 bg-slate-50 w-1/3 max-w-[400px] max-h-[700px] m-8 px-4 py-6",children:[(0,e.jsx)("p",{className:"mb-8",children:"Main"}),a?(0,e.jsx)("ul",{className:"space-y-2",children:a.map(s=>(0,e.jsxs)("li",{className:"flex items-center space-x-2",children:[(0,e.jsx)("input",{name:"version2",value:s.version,type:"checkbox",checked:s.version===r||s.version===o,onChange:i=>{i.target.checked?c(s.version):r===s.version&&o===""?new Error("You can't uncheck the present version"):(r===s.version&&g(o),c(""))}}),(0,e.jsx)("p",{children:s.version})]},s.version))}):"No side"]})]})}export{T as default,P as meta};
